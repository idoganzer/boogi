---
title: Why we are using assets listener
editable: false
---

<div align="center" style="background-color: #e5ecff">    <br/>    <div>DOC</div>    <h1>Why we are using assets listener</h1>    <br/>  </div>

### Files Used:
ðŸ“„ assetLister.js

ðŸ“„ package.json


<br/>

The assets listener is used to convert the assets folder into a js object for easier manipulation from the game.
If you receive errors about the manifest or assets loading, try running `npm run assetLister` to create a list for the app.


<br/>

The function that is actually being called id `readDirectory` that as you can see generates the assets.js file

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ assetLister.js  </div>

```js
â¬œ 110    	return `{id: "${fileEntity.name}", url: require("assets/${fileEntity.url}") }`;
â¬œ 111    }
â¬œ 112    
ðŸŸ© 113    readDirectory(path.join(__dirname, 'assets'))
ðŸŸ© 114    	// Generate the JavaScript
ðŸŸ© 115    	.then((result) => `export default ${writeToString(result, true)}`)
ðŸŸ© 116    	// Add path fix for Windows
ðŸŸ© 117    	.then((result) => result.replace(/\\/g, '\\\\'))
ðŸŸ© 118    	// Format the JavaScript so that it's readable
ðŸŸ© 119    	.then((result) => {
ðŸŸ© 120    		return prettier.format(result, { parser: 'babel' });
ðŸŸ© 121    	})
ðŸŸ© 122    	// We only need to write one file so it doesn't matter that it's sync
ðŸŸ© 123    	.then((result) => fs.writeFileSync(path.resolve(__dirname, 'src', 'assets.js'), result)) // eslint-disable-line no-sync
ðŸŸ© 124    	.then((_) => console.log('Asset lister completed'))
ðŸŸ© 125    	.catch((err) => console.error(`Asset lister failed: ${err.toString()}`));
```
<br/>

This is the command that uses this service

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ package.json  </div>

```json
â¬œ 69     		"build:dev": "npm run assetLister && webpack --mode=development",
â¬œ 70     		"start": "cross-env NODE_ENV=production node server.js",
â¬œ 71     		"start:dev": "cross-env NODE_ENV=development webpack-dev-server",
ðŸŸ© 72     		"assetLister": "node ./assetLister.js",
â¬œ 73     		"lint": "eslint src/*.js src/**/*.js",
â¬œ 74     		"lint-fix": "eslint --fix src/*.js src/**/*.js",
â¬œ 75     		"eslint-check": "eslint --print-config .eslintrc.json | eslint-config-prettier-check",
```
<br/>



<br/>

<br/><br/>

This file was generated by Swimm. [Click here to view it in the app](https://swimm.io/link?l=c3dpbW0lM0ElMkYlMkZyZXBvcyUyRm5xMjh5MjNzcTBpYnB4ZG4xSkpUJTJGZG9jcyUyRjV5a21IcTh3MmdhaVpvMmgxQjRh). Timestamp: 2021-04-22T07:38:25.296Z
