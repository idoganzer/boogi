{"componentChunkName":"component---src-templates-docs-js","path":"/RxVEhmU7sFvwpAWiVlub","result":{"data":{"site":{"siteMetadata":{"title":"My BooGi App","docsLocation":"","docsLocationType":"","editable":true}},"mdx":{"fields":{"id":"7738edd3-4dc9-5da8-8b04-7b9f88e1292e","title":"How the game is being served","slug":"/RxVEhmU7sFvwpAWiVlub"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How the game is being served\",\n  \"editable\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"div\", {\n    align: \"center\",\n    style: {\n      \"backgroundColor\": \"#e5ecff\"\n    }\n  }, \"    \", mdx(\"br\", null), \"    \", mdx(\"div\", null, \"DOC\"), \"    \", mdx(\"h1\", null, \"How the game is being served\"), \"    \", mdx(\"br\", null), \"  \"), mdx(\"section\", null, mdx(\"h3\", {\n    parentName: \"section\"\n  }, \"Files Used:\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"\\uD83D\\uDCC4 package.json\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"\\uD83D\\uDCC4 server.js\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"\\uD83D\\uDCC4 webpack.config.js\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"\\uD83D\\uDCC4 src/index.ejs\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"\\uD83D\\uDCC4 src/script.js\"), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"In order to serve the game we use the express server.\\nHere are some links if you want to know more about \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://nodejs.org/en/\"\n  }), \"node\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://expressjs.com\"\n  }), \"express\"), \".\\nKnow that we only use it to serve the file so nothing fancy...\"), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"When you run the dev env with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run start\"), \" we call the server.js script\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 package.json  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"\\u2B1C 67        \\\"scripts\\\": {\\n\\u2B1C 68            \\\"build\\\": \\\"npm run assetLister && webpack --mode=production\\\",\\n\\u2B1C 69            \\\"build:dev\\\": \\\"npm run assetLister && webpack --mode=development\\\",\\n\\uD83D\\uDFE9 70           \\\"start\\\": \\\"cross-env NODE_ENV=production node server.js\\\",\\n\\u2B1C 71            \\\"start:dev\\\": \\\"cross-env NODE_ENV=development webpack-dev-server\\\",\\n\\u2B1C 72            \\\"assetLister\\\": \\\"node ./assetLister.js\\\",\\n\\u2B1C 73            \\\"lint\\\": \\\"eslint src/*.js src/**/*.js\\\",\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"The server uses only 2 folders for serving, the most important one is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"deploy\"), \" folder where we keep our initial html\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 server.js  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"\\u2B1C 10     // Enable gzip compression\\n\\u2B1C 11     app.use(compression());\\n\\u2B1C 12     \\n\\uD83D\\uDFE9 13     // Assets are hashed so they can be in the cache for longer\\n\\uD83D\\uDFE9 14     app.use(\\n\\uD83D\\uDFE9 15       '/assets/',\\n\\uD83D\\uDFE9 16       express.static(path.join(__dirname, 'deploy', 'assets'), {\\n\\uD83D\\uDFE9 17           maxAge: '1d',\\n\\uD83D\\uDFE9 18       }),\\n\\uD83D\\uDFE9 19     );\\n\\uD83D\\uDFE9 20     app.use(express.static(path.join(__dirname, 'deploy')));\\n\\u2B1C 21     \\n\\u2B1C 22     // Listen for server, and use static routing for deploy directory\\n\\u2B1C 23     app.listen(port, ip, () => {\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"The main file we build from is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"script.js\")), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 webpack.config.js  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"\\u2B1C 14        const production = (argv && argv.mode === 'production') || process.env.NODE_ENV === 'production';\\n\\u2B1C 15     \\n\\u2B1C 16        return {\\n\\uD83D\\uDFE9 17           entry: ['babel-polyfill', path.resolve(__dirname, 'src', 'script.js')],\\n\\u2B1C 18            output: {\\n\\u2B1C 19                path: path.resolve(__dirname, 'deploy'),\\n\\u2B1C 20                filename: 'ancientbeast.js',\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"The result of the build is our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ancientbeast.js\"), \" file which is being built by Webpack\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 webpack.config.js  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"\\u2B1C 15     \\n\\u2B1C 16        return {\\n\\u2B1C 17            entry: ['babel-polyfill', path.resolve(__dirname, 'src', 'script.js')],\\n\\uD83D\\uDFE9 18           output: {\\n\\uD83D\\uDFE9 19               path: path.resolve(__dirname, 'deploy'),\\n\\uD83D\\uDFE9 20               filename: 'ancientbeast.js',\\n\\uD83D\\uDFE9 21               // chunkFilename: '[id].chunk.js',\\n\\uD83D\\uDFE9 22               // publicPath: process.env.PUBLIC_PATH ? process.env.PUBLIC_PATH : '/',\\n\\uD83D\\uDFE9 23           },\\n\\u2B1C 24            devtool: production ? 'none' : 'source-map',\\n\\u2B1C 25            module: {\\n\\u2B1C 26                rules: [\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"We later inject this js to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.ejs\"), \" file\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 src/index.ejs  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ejs\"\n  }), \"\\u2B1C 9             <meta name=\\\"monetization\\\" content=\\\"$pay.stronghold.co/1a15c4d9d46cdd64f9e9094a7c4f04240dc\\\">\\n\\u2B1C 10            <meta name=\\\"theme-color\\\" content=\\\"black\\\">\\n\\u2B1C 11            <link rel=\\\"manifest\\\" href=\\\"manifest.json\\\">\\n\\uD83D\\uDFE9 12           <title>Ancient Beast 0.4</title>\\n\\u2B1C 13            <style>\\n\\u2B1C 14                .scrim.loading {\\n\\u2B1C 15                opacity: 1;\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"This is the webpack plugin we use for rendering the ejs file to HTML\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 webpack.config.js  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"\\u2B1C 76                    patterns: [{ from: 'static' }],\\n\\u2B1C 77                }),\\n\\u2B1C 78                new HtmlWebpackPlugin({\\n\\uD83D\\uDFE9 79                   template: path.resolve(__dirname, 'src', 'index.ejs'),\\n\\u2B1C 80                    favicon: path.resolve(__dirname, 'assets', 'favicon.png'),\\n\\u2B1C 81                    production,\\n\\u2B1C 82                }),\\n\")), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"And then the game loads the global variables the CSS and the HTML is mostly already rendered\"), mdx(\"div\", {\n    style: {\n      \"background\": \"#e5ecff\",\n      \"padding\": \"10px 10px 10px 10px\",\n      \"borderBottom\": \"1px solid #c1c7d0\",\n      \"borderRadius\": \"4px\"\n    }\n  }, \"    \\uD83D\\uDCC4 src/script.js  \"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"\\u2B1C 12     // Load the stylesheet\\n\\u2B1C 13     import './style/main.less';\\n\\u2B1C 14     \\n\\uD83D\\uDFE9 15     // Generic object we can decorate with helper methods to simply dev and user experience.\\n\\uD83D\\uDFE9 16     // TODO: Expose this in a less hacky way.\\n\\uD83D\\uDFE9 17     let AB = {};\\n\\uD83D\\uDFE9 18     let session = {};\\n\\uD83D\\uDFE9 19     // Create the game\\n\\uD83D\\uDFE9 20     const G = new Game('0.4');\\n\\uD83D\\uDFE9 21     // Helper properties and methods for retrieving and playing back game logs.\\n\\uD83D\\uDFE9 22     // TODO: Expose these in a less hacky way too.\\n\\uD83D\\uDFE9 23     AB.currentGame = G;\\n\\uD83D\\uDFE9 24     AB.getLog = AB.currentGame.gamelog.get.bind(AB.currentGame.gamelog);\\n\\uD83D\\uDFE9 25     AB.restoreGame = AB.currentGame.gamelog.play.bind(AB.currentGame.gamelog);\\n\\uD83D\\uDFE9 26     window.AB = AB;\\n\\uD83D\\uDFE9 27     const connect = new Connect(G);\\n\\uD83D\\uDFE9 28     G.connect = connect;\\n\\uD83D\\uDFE9 29     \\n\\uD83D\\uDFE9 30     // const email = \\\"junior@example.com\\\";\\n\\uD83D\\uDFE9 31     // const password = \\\"8484ndnso\\\";\\n\\uD83D\\uDFE9 32     // const session = Cli.authenticateEmail({ email: email, password: password, create: true, username: \\\"boo\\\" })\\n\\uD83D\\uDFE9 33     // Load the abilities\\n\\uD83D\\uDFE9 34     dataJson.forEach(async (creature) => {\\n\\uD83D\\uDFE9 35       if (!creature.playable) {\\n\\uD83D\\uDFE9 36           return;\\n\\uD83D\\uDFE9 37       }\\n\\uD83D\\uDFE9 38     \\n\\uD83D\\uDFE9 39       import(`./abilities/${creature.name.split(' ').join('-')}`).then((generator) =>\\n\\uD83D\\uDFE9 40           generator.default(G),\\n\\uD83D\\uDFE9 41       );\\n\\uD83D\\uDFE9 42     });\\n\\u2B1C 43     \\n\")), mdx(\"br\", null), mdx(\"br\", null), mdx(\"br\", null), mdx(\"br\", null), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"This file was generated by Swimm. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://swimm.io/link?l=c3dpbW0lM0ElMkYlMkZyZXBvcyUyRm5xMjh5MjNzcTBpYnB4ZG4xSkpUJTJGZG9jcyUyRlJ4VkVobVU3c0Z2d3BBV2lWbHVi\"\n  }), \"Click here to view it in the app\"), \". Timestamp: 2021-04-22T07:38:25.403Z\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#files-used","title":"Files Used:"}]},"timeToRead":1,"parent":{"__typename":"File","relativePath":"RxVEhmU7sFvwpAWiVlub.md","fields":null},"frontmatter":{"metaTitle":null,"showMetadata":null,"editable":false,"showPreviousNext":null,"showToc":null}},"gitBranch":{"name":"master"},"gitCommit":{"hash":"0cb17677e25377d6041a73fa8033496a1bb1ce03","date":"2021-04-21 03:46"}},"pageContext":{"id":"7738edd3-4dc9-5da8-8b04-7b9f88e1292e"}},"staticQueryHashes":["12478684","12478684","2882937274","2882937274","353167761","353167761","3812332637","3812332637"]}